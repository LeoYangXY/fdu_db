<!DOCTYPE html>
<html>
<head>
    <title>{{ student.name }}的考勤记录</title>
    <style>
        body { font-family: Arial; margin: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background: #f2f2f2; }
        .present { color: green; }
        .absent { color: red; }
        .late { color: orange; }
    </style>
</head>
<body>
    <div class="container">
        <h1>{{ student.name }} ({{ student.student_id }})</h1>
        <h2>{{ course.course_name }} ({{ course.course_code }})</h2>

        <h3>考勤记录</h3>
        <table>
            <thead>
                <tr>
                    <th>日期</th>
                    <th>状态</th>
                    <th>备注</th>
                </tr>
            </thead>
            <tbody>
                {% for record in records %}
                <tr>
                    <td>{{ record.date|date:"Y-m-d" }}</td>
                    <td class="{{ record.status }}">
                        {% if record.status == 'present' %}出勤
                        {% elif record.status == 'absent' %}缺勤
                        {% elif record.status == 'late' %}迟到
                        {% endif %}
                    </td>
                    <td>{{ record.notes }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <h3>请假记录</h3>
        <table>
            <thead>
                <tr>
                    <th>请假日期</th>
                    <th>原因</th>
                    <th>状态</th>
                </tr>
            </thead>
            <tbody>
                {% for leave in leave_records %}
                <tr>
                    <td>{{ leave.leave_date|date:"Y-m-d" }}</td>
                    <td>{{ leave.reason }}</td>
                    <td>{% if leave.approved %}已批准{% else %}待审批{% endif %}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <a href="{% url 'student_check_records' %}">返回查询</a>
    </div>
</body>
</html>